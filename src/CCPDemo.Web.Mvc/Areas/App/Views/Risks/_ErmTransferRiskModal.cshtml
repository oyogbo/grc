@using System.Globalization
@using CCPDemo.Web.Areas.App.Models.Common.Modals
@using CCPDemo.Web.Areas.App.Models.Risks
@model CreateOrEditRiskModalViewModel
@using Abp.Extensions
@await Html.PartialAsync("~/Areas/App/Views/Common/Modals/_ModalHeader.cshtml", new ModalHeaderViewModel("Transfer Risk"))

@{
    
}


<div class="modal-body">
    <div id="RiskInformationsTab">
        <form id="RiskTransferForm" asp-action="TransferRisk" role="form" novalidate class="form-validation">

            @if (Model.IsEditMode)
            {
                

            }

            <input type="hidden" id="riskId" name="id" value="@Model.Risk.Id" />
            <input type="hidden" id="currentOwner" name="id" value="@Model.Risk.RiskOwner" />
            <input type="hidden" id="loggedInUserId" name="loggedInUserId" value="@AbpSession.UserId" />

            <div class="my-3">
                <label class="form-label" for="VRisk_Name">Risk Type</label>
                <input class="form-control form-control-solid" id="Risk_RiskType" value="@Model.Risk.RiskType" type="text" name="Risk_RiskType" />
            </div>

            <div class="my-3">
                <label class="form-label" for="VRisk_Description">Risk Summary</label>
                @*<input class="form-control" id="VRisk_Description" value="@Model.VRisk.Description" type="text" name="description" />*@
                <textarea id="VRisk_Description" rows="5" name="description" class="form-control form-control-solid" maxlength="256">@Model.Risk.RiskSummary</textarea>
            </div>

            <div class="my-3">
                <label class="form-label" for="VRisk_Department">@L("Department")</label>
                @*<input class="form-control form-control-solid" id="VRisk_Department" value="@Model.VRisk.Department" type="text" name="department" />*@
                <select id="Risk_Department" name="department" class="form-control">

                    @{
                        var selectDept = Model.Risk.Department ?? "Select Department";

                    }
                    <option value="0">
                        @selectDept
                    </option>
                    <option value="Finance">Finance</option>
                    <option value="Technology & Digital Transformation">Technology & Digital Transformation</option>
                    <option value="ERM">ERM</option>
                    <option value="Legal Services">Legal Services</option>
                </select>
            </div>

            <div class="my-3">
                <label class="form-label" for="Risk_RiskOwner">Risk Owner</label>
                @*<input class="form-control form-control-solid" id="VRisk_RiskOwner" value="@Model.VRisk.RiskOwner" type="text" name="riskOwner" />*@
                <select id="VRisk_RiskOwner" name="riskOwner" class="form-control">
                    @{
                        var selectUser = Model.Risk.RiskOwner ?? "Select User";

                    }
                    <option value="0">
                        @selectUser
                    </option>
                    @foreach (var user in Model.Users)
                    {
                        <option value="@user.FullName">@user.FullName</option>
                    }
                </select>
            </div>

            <div class="my-3">
                <label class="form-label" for="Risk_TargetDate">Target Date</label>
                <input class="form-control form-control-solid" id="Risk_ResolutionTimeLine" value="@Model.Risk.TargetDate" type="text" name="targetDate" />
            </div>

            <div class="my-3">
                <label class="form-label" for="VRisk_ERMComment">ERM Comment</label>
                @*<input class="form-control" id="VRisk_ERMComment" value="@Model.VRisk.ERMComment" type="text" name="ermComment" />*@
                <textarea id="VRisk_ERMComment" rows="5" name="ermComment" class="form-control form-control-solid" maxlength="256">@Model.Risk.ERMComment</textarea>
            </div>

            <div class="my-3">
                <label class="form-label" for="Risk_Status">@L("Status")</label>
                @*<input class="form-control form-control-solid" id="VRisk_Status" value="@Model.VRisk.Status" type="text" name="status" />*@
                <select id="Risk_Status" name="status" class="form-control">

                    @{
                        var selectStatus = Model.Risk.Status;
                        var statusValue = "0";
                        if (!selectStatus.IsNullOrEmpty())
                        {
                            statusValue = selectStatus;
                        }
                        else
                        {
                            selectStatus = "Select Status";
                        }

                    }
                    <option value="@statusValue">
                        @selectStatus
                    </option>
                    <option value="New/Open" selected>New/Open</option>
                    <option value="Mitigation Planned">Mitigation Planned</option>
                    <option value="Management Review">Management Reviewed</option>
                    <option value="Closed">Closed</option>
                    <option value="Reopened">Reopned</option>
                    <option value="Untreated">Untreated</option>
                    <option value="Treated">Treated</option>
                </select>
            </div>

            <div class="my-3">
                <label class="form-label" for="Risk_Department">@L("Rating")</label>
                @*<input class="form-control form-control-solid" id="VRisk_Department" value="@Model.VRisk.Department" type="text" name="department" />*@
                <select id="Risk_Rating" name="rating" class="form-control">

                    @{
                        var selectRating = Model.Risk.Rating ?? "Select Rating";

                    }
                    <option value="0">
                        @selectRating
                    </option>
                    <option value="Critical">Critical</option>
                    <option value="Very Highn">Very High</option>
                    <option value="Highn">High</option>
                    <option value="Medium">Medium</option>
                    <option value="Low">Low</option>
                </select>
            </div>

        </form>
    </div>
</div>

<div class="modal-footer">
    <button type="button" class="btn btn-light-primary font-weight-bold close-button" data-bs-dismiss="modal">@L("Cancel")</button>
    <button type="button" class="btn btn-primary save-button" id="transferRiskSaveBtn"><i class="fa fa-save"></i> <span>@L("Save")</span></button>
</div>

